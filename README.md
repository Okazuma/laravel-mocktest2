アプリケーション名
=====
    飲食店予約アプリ
<img width="650" src="https://github.com/user-attachments/assets/eb64bbf4-5ec6-44a9-bc30-557803cb39f3">



概要説明
=====
    1 利用者が飲食店一覧から店舗情報を見て予約やお気に入り登録ができる

    2 店舗代表者と管理者がそれぞれの管理画面から情報の管理やお知らせメールを送信できる

    3 ユーザーは受け取った予約のリマインダーメールから決済やレビューが可能



作成目的
=====
    1 利用者が飲食店を探すときにエリアやジャンル別で検索しスムーズに店舗を決められるように

    2 予約や決済、レビューなど全てをネット上で行えるようにして人的コスト削減や業務効率化を図るため

    3 シンプルな見た目と構成にして利用側と管理側のユーザーが直感的に使えるように



アプリケーションURL
=====
    http://54.249.16.235/

    メール認証機能を設定しているのでホーム画面へアクセスするためには
    初回アクセス時に会員登録->メール認証->ログインの順でユーザー登録が必要です。



機能一覧
=====
    1 会員登録、ログイン機能

    2 メール認証機能

    3 店舗一覧ソート機能

    4 検索フォームから非同期通信で検索

    5 イイね(ハート)を押してお気に入り保存と取り消し

    6 店舗への予約機能(日付、時間、人数の指定可能)

    7 ユーザーごとのページで予約やお気に入りの管理

    8 ユーザー、飲食店代表者、管理者での閲覧可能ページの切り替え

    9 飲食店代表者の作成 (管理者権限)

    10 CSVインポート機能 (管理者権限)

    11 飲食店情報の追加、編集 (飲食店代表者権限)

    12 予約情報の確認 (飲食店代表者権限)

    13 送信先を選択してお知らせメールの送信 (飲食店代表者権限)

    14 利用者へ予約日当日の午前9:00にリマインダーメールの送信

    15 リマインダーメール内のリンクからstripeでの決済

    16 リマインダーメールに添付のQRコードで予約情報の確認 (飲食店代表者権限)

    17 店舗に対しての口コミ(レビュー)。



詳細内容
=====
    * シーディングで管理者(admin)が初期データで作成される
      管理者(admin)としてアクセスする場合
      email: admin@example.com    password: 00000000

    * 飲食店代表者(store_manager)の作成は管理者(admin)の管理画面から作成可能

    * ゲストユーザーとログインユーザーによってハンバーガーメニューボタンを押した時のメニュー表示が切り替わる

    * mypageでの予約情報の管理
        予約カードの時計アイコンから予約情報の変更、x印アイコンから予約情報の削除が可能

    * どのユーザーでアクセスしたかでハンバーガーメニューの内容が変わる
        利用者(user)にはゲストユーザーとログインユーザーで切り替え
        飲食店代表者(store_manager)でのアクセスは店舗代表者の管理画面(Dashboard)が追加表示
        管理者(admin)でアクセスすると管理者の管理画面(Dashboard)が追加表示

    * 飲食店管理者の作成 (管理者ページ)
        admin権限で飲食店代表者を新規作成できる

    * CSVインポート機能 (管理者ページ)
        admin権限でCSVをインポートして店舗情報を追加することができる。
        - CSVファイルの記述方法
        1.
        2.
        3.


    * 飲食店情報の追加、編集 (飲食店代表者ページ)
        "作成と更新"ページで店舗の新規追加が可能で、詳細ボタンから各店舗情報を編集可能

    * 予約情報の確認 (飲食店代表者ページ)
        ユーザーが予約した情報を確認できる

    * 送信先を選択してお知らせメールの送信 (飲食店代表者ページ)
        "案内メールの送信"から利用者へメールを送信できる (送信先は複数選択可能)

    * リマインダーメール
        phpコンテナから php artisan reminder:send コマンドでテスト送信可能。
        テスト送信をする日に予約が存在しないといけないので先に利用者として予約情報の作成が必要。

    * QRコード
        リマインダーメールに添付されたQRコードを読み取りstore_managerとしてログインすると、
        管理画面の予約情報一覧が表示され予約内容を照合できる。

    * stripeでの決済
        リマインダーメールの内容に決済リンクがあり、そこからstripeの決済画面にアクセスできる。
        テストモードなので決済時はテスト用のカード情報を入力して決済確認可能。
        - メールアドレス  任意のメールアドレス (例:test@example.com)
        - カード番号  4242 4242 4242 4242
        - 有効期限  任意の将来の月と年 (例: 08/30)
        - CVC: 任意の3桁  (例:123)
        - カード保有者の名前  任意の名前 (例: 山田太郎)

    * 店舗への口コミ(レビュー)
        店舗の詳細ページから5段階評価、コメント、イメージ画像の追加が可能。
        - 一般ユーザーは口コミの投稿ができ、自分の口コミのみ編集、削除が可能
        - 店舗代表者は口コミの閲覧のみが可能
        - 管理者は口コミの閲覧と全ての口コミに対しての削除が可能



使用技術
=====
    Docker 27.1.1

    php 8.3.9

    Laravel 8.83

    Composer 2.7.7

    nginx 1.21.1

    Mysql 8.0.37

    phpMyAdmin 5.2.1

    imagick 3.7.0

    Stripe PHP SDK 15.4.0



テーブル設計
=====
<img width="650" src="https://github.com/user-attachments/assets/b8dae6cb-0300-4508-b922-a7a1b4837ef8">


ER図
=====
<img width="650" src="https://github.com/user-attachments/assets/635a3dfe-5f47-4e0c-8465-37d301d472c7">


dockerビルド
=====
    1 git clone リンク  https://github.com/Okazuma/laravel-mocktest2.git

    2 docker-compose up -d --build

    * MysqlはOSによって起動しない場合があるので、それぞれのPCに合わせてdocker-compose.ymlを編集してください。



Laravelの環境構築
=====
    1 phpコンテナにログイン        $docker-compose exec php bash

    2 パッケージのインストール      $composer-install

    3 .envファイルの作成          cp .env.example .env

    4 アプリケーションキーの生成    $php artisan key:generate

    5 マイグレーション            $php artisan migrate

    6 シーディング               $php artisan db:seed

    7 シンボリックリンクの生成     $php artisan storage:link



メールサーバー設定について
=====
    1 使用しているメールサーバーから必要な設定情報を取得

    2 メールサーバーの情報を.envファイルに設定

    3 .envファイルの変更が反映するようlaravelの設定キャッシュのクリア



CSVファイルの記述方法
=====
    * CSVファイルのフォーマット
<img width="500" src="https://github.com/user-attachments/assets/95cb1eb9-3193-4935-9536-25ff383ffef0">


    * エクセルやスプレッドシートでのCSVファイル作成方法
        - 1行目に各キーをセルごとに入力する(横向きに入力)
         「name」「description」「area」「genre」「image_path」
        - 2行目以降に店舗情報の値をセルごとに入力する(横向きに入力)
         「店舗A」「この店舗は…」「東京」「寿司」「storage/image/….jpeg」
<img width="500" src="https://github.com/user-attachments/assets/56b1060c-0035-4bf8-b366-62bf807684d1">


    * テキストエディタでの作成方法——
        - 1行目に項目名をカンマ区切りで入力する
         name , description , area , genre , image_path
        - 2行目以降に追加するデータをカンマ区切りで記述する。
         店舗名,店舗概要,地域,ジャンル,画像URL
<img width="500" src="https://github.com/user-attachments/assets/6d3d665e-cce1-43cb-a798-d274a6260141">


